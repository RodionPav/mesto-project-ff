{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/utils/checkResponse.js","webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/scripts/index.js"],"sourcesContent":["function checkResponse(res) {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка: ${res.status}`);\r\n}\r\n\r\nexport { checkResponse };\r\n","import { checkResponse } from \"../utils/checkResponse\";\r\n\r\nconst config = {\r\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-24\",\r\n  headers: {\r\n    authorization: \"d8924f35-962a-45f8-9e42-e25d9d1dfa42\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\nfunction request(endpoint, options) {\r\n  return fetch(`${config.baseUrl}${endpoint}`, options).then(checkResponse);\r\n}\r\n\r\nconst promise1 = new Promise((resolve, reject) => {\r\n  request(`/users/me`, {\r\n    headers: config.headers,\r\n  }).then((result) => {\r\n    resolve(result);\r\n  });\r\n});\r\n\r\nconst promise2 = new Promise((resolve, reject) => {\r\n  request(`/cards`, {\r\n    headers: config.headers,\r\n  }).then((result) => {\r\n    resolve(result);\r\n  });\r\n});\r\n\r\nexport const getInitialData = (editProfile, initCards, userId) => {\r\n  Promise.all([promise1, promise2]).then(([response1, response2]) => {\r\n    editProfile(response1);\r\n    initCards(response2);\r\n  });\r\n};\r\n\r\nexport const patchAvatar = (avatar) => {\r\n  return request(`/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar,\r\n    }),\r\n  });\r\n};\r\n\r\nexport const patchEditProfile = (name, about) => {\r\n  return request(`/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name,\r\n      about,\r\n    }),\r\n  });\r\n};\r\n\r\nexport const postNewCard = (name, link) => {\r\n  return request(`/cards`, {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name,\r\n      link,\r\n    }),\r\n  });\r\n};\r\n\r\nexport const deleteCard = (cardId) => {\r\n  return request(`/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  });\r\n};\r\n\r\nexport const putLike = (card) => {\r\n  return request(`/cards/likes/${card._id}`, {\r\n    method: \"PUT\",\r\n    headers: config.headers,\r\n  });\r\n};\r\n\r\nexport const deleteLike = (card) => {\r\n  return request(`/cards/likes/${card._id}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  });\r\n};\r\n","import { deleteCard, deleteLike, putLike } from \"./api\";\r\n\r\nconst cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\nfunction createCard(card, removeCard, toggleLikeCard, openImagePopup, userId) {\r\n  const newCard = cardTemplate.querySelector(\".places__item\").cloneNode(true);\r\n  getCardTemplate(card, newCard);\r\n\r\n  const buttonDelete = newCard.querySelector(\".card__delete-button\");\r\n  buttonDelete.addEventListener(\"click\", () => {\r\n    removeCard(card, newCard);\r\n  });\r\n  if (card.owner._id !== userId) {\r\n    buttonDelete.classList.add(\"card__delete-button-hidden\");\r\n  }\r\n\r\n  const buttonLike = newCard.querySelector(\".card__like-button\");\r\n  card.likes.forEach((element) => {\r\n    if (element._id == userId) {\r\n      buttonLike.classList.toggle(\"card__like-button_is-active\");\r\n    }\r\n  });\r\n  buttonLike.addEventListener(\"click\", () => {\r\n    toggleLikeCard(buttonLike, card, newCard);\r\n  });\r\n\r\n  const imageOpener = newCard.querySelector(\".card__image\");\r\n  imageOpener.addEventListener(\"click\", () =>\r\n    openImagePopup(card.link, card.name)\r\n  );\r\n  return newCard;\r\n}\r\n\r\nfunction getCardTemplate(card, newCard) {\r\n  const cardImage = newCard.querySelector(\".card__image\");\r\n  cardImage.src = card.link;\r\n  cardImage.alt = card.name;\r\n  newCard.querySelector(\".card__title\").textContent = card.name;\r\n  newCard.querySelector(\".card__like-counter\").textContent = card.likes.length;\r\n}\r\n\r\nfunction removeCard(card, cardElement) {\r\n  deleteCard(card._id)\r\n    .then(() => {\r\n      cardElement.remove();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n}\r\n\r\nfunction toggleLikeCard(cardElement, card, newCard) {\r\n  if (cardElement.classList.contains(\"card__like-button_is-active\")) {\r\n    deleteLike(card)\r\n      .then((result) => {\r\n        newCard.querySelector(\".card__like-counter\").textContent =\r\n          result.likes.length;\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      })\r\n      .finally(() => {\r\n        cardElement.classList.toggle(\"card__like-button_is-active\");\r\n      });\r\n  } else {\r\n    putLike(card)\r\n      .then((result) => {\r\n        newCard.querySelector(\".card__like-counter\").textContent =\r\n          result.likes.length;\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      })\r\n      .finally(() => {\r\n        cardElement.classList.toggle(\"card__like-button_is-active\");\r\n      });\r\n  }\r\n}\r\n\r\nexport { createCard, removeCard, toggleLikeCard };\r\n","function openModal(popup) {\r\n  popup.classList.add(\"popup_is-opened\");\r\n  document.addEventListener(\"keydown\", closeModalEsc);\r\n  popup.addEventListener(\"click\", closeOnBackDropClick);\r\n}\r\n\r\nfunction closeModal(popup) {\r\n  popup.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", closeModalEsc);\r\n  popup.removeEventListener(\"click\", closeOnBackDropClick);\r\n}\r\n\r\nfunction closeOnBackDropClick({ currentTarget, target }) {\r\n  const popup = currentTarget;\r\n  const isClickedOnBackDrop = target === popup;\r\n  if (isClickedOnBackDrop) {\r\n    closeModal(popup);\r\n  }\r\n}\r\n\r\nfunction closeModalEsc() {\r\n  if (event.key === \"Escape\") {\r\n    const opendPopup = document.querySelector(\".popup_is-opened\");\r\n    closeModal(opendPopup);\r\n  }\r\n}\r\n\r\nexport { openModal, closeModal };\r\n","const hasInvalidInput = (inputList) => {\r\n  return inputList.some((inputElement) => {\r\n    return !inputElement.validity.valid;\r\n  });\r\n};\r\n\r\nconst toggleButtonState = (inputList, formElement, validationConfig) => {\r\n  const popupButton = formElement.querySelector(\r\n    validationConfig.submitButtonSelector\r\n  );\r\n  if (hasInvalidInput(inputList)) {\r\n    popupButton.disabled = true;\r\n    popupButton.classList.add(validationConfig.inactiveButtonClass);\r\n  } else {\r\n    popupButton.disabled = false;\r\n    popupButton.classList.remove(validationConfig.inactiveButtonClass);\r\n  }\r\n};\r\n\r\nconst showInputError = (\r\n  formElement,\r\n  inputElement,\r\n  errorMessage,\r\n  validationConfig\r\n) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.add(validationConfig.inputErrorClass);\r\n  errorElement.classList.add(validationConfig.errorClass);\r\n  errorElement.textContent = errorMessage;\r\n};\r\n\r\nconst hideInputError = (formElement, inputElement, validationConfig) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.remove(validationConfig.inputErrorClass);\r\n  errorElement.classList.remove(validationConfig.errorClass);\r\n  errorElement.textContent = \"\";\r\n};\r\n\r\nconst isValid = (formElement, inputElement, validationConfig) => {\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity(\"\");\r\n  }\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(\r\n      formElement,\r\n      inputElement,\r\n      inputElement.validationMessage,\r\n      validationConfig\r\n    );\r\n  } else {\r\n    hideInputError(formElement, inputElement, validationConfig);\r\n  }\r\n};\r\n\r\nconst setEventListeners = (formElement, validationConfig) => {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(validationConfig.inputSelector)\r\n  );\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener(\"input\", () => {\r\n      isValid(formElement, inputElement, validationConfig);\r\n      toggleButtonState(inputList, formElement, validationConfig);\r\n    });\r\n  });\r\n};\r\n\r\nconst enableValidation = (validationConfig) => {\r\n  const formList = Array.from(\r\n    document.querySelectorAll(validationConfig.formSelector)\r\n  );\r\n  formList.forEach((formElement) => {\r\n    setEventListeners(formElement, validationConfig);\r\n  });\r\n};\r\n\r\nconst clearValidation = (formElement, validationConfig) => {\r\n  const errorElements = Array.from(\r\n    formElement.querySelectorAll(validationConfig.inputSelector)\r\n  );\r\n  errorElements.forEach((elm) => {\r\n    hideInputError(formElement, elm, validationConfig);\r\n  });\r\n};\r\n\r\nconst disableButton = (newCardPopup) => {\r\n  const popupButton = newCardPopup.querySelector(\".popup__button\");\r\n  popupButton.disabled = true;\r\n  popupButton.classList.add(\"popup__button_disabled\");\r\n};\r\n\r\nexport { enableValidation, clearValidation, disableButton };\r\n","import \"../pages/index.css\";\r\nimport { createCard, removeCard, toggleLikeCard } from \"../components/card\";\r\nimport { openModal, closeModal } from \"../components/modal\";\r\nimport {\r\n  enableValidation,\r\n  clearValidation,\r\n  disableButton,\r\n} from \"../components/validation\";\r\nimport {\r\n  getInitialData,\r\n  patchAvatar,\r\n  patchEditProfile,\r\n  postNewCard,\r\n} from \"../components/api\";\r\n\r\nlet userId;\r\n\r\nfunction toggleButtonTextContent(popup) {\r\n  const popupButton = popup.querySelector(\".popup__button\");\r\n  if (popupButton.textContent.includes(\"Сохранить\")) {\r\n    popupButton.textContent = \"Сохранение...\";\r\n  } else {\r\n    popupButton.textContent = \"Сохранить\";\r\n  }\r\n}\r\n\r\nconst profileTitle = document.querySelector(\".profile__title\");\r\nconst profileDescription = document.querySelector(\".profile__description\");\r\nconst profileImage = document.querySelector(\".profile__image-img\");\r\n\r\nconst editProfile = (result) => {\r\n  userId = result._id;\r\n  profileTitle.textContent = result.name;\r\n  profileDescription.textContent = result.about;\r\n  profileImage.src = result.avatar;\r\n};\r\n\r\nconst initCards = (result) => {\r\n  result.forEach((elem) => appendCard(elem));\r\n};\r\n\r\ngetInitialData(editProfile, initCards, userId);\r\n\r\nconst placeList = document.querySelector(\".places__list\");\r\n\r\nfunction appendCard(elem) {\r\n  const cardElement = createCard(\r\n    elem,\r\n    removeCard,\r\n    toggleLikeCard,\r\n    openImagePopup,\r\n    userId\r\n  );\r\n  placeList.append(cardElement);\r\n}\r\n\r\nconst popups = document.querySelectorAll(\".popup\");\r\n\r\npopups.forEach((popup) => {\r\n  popup.addEventListener(\"click\", function (evt) {\r\n    if (evt.target.classList.contains(\"popup__close\")) {\r\n      closeModal(popup);\r\n    }\r\n  });\r\n});\r\n\r\nconst avatarOpener = document.querySelector(\".profile__image-button\");\r\nconst avatarPopup = document.querySelector(\".popup_type_avatar\");\r\navatarOpener.addEventListener(\"click\", () => editProfileImage(avatarPopup));\r\nconst popupInputUrl = document.querySelector(\".popup__input_type_avatar_url\");\r\n\r\nfunction editProfileImage(avatarPopup) {\r\n  openModal(avatarPopup);\r\n  addValuesInAvatarPopup();\r\n}\r\n\r\nfunction addValuesInAvatarPopup() {\r\n  popupInputUrl.value = profileImage.src;\r\n}\r\n\r\nconst editOpener = document.querySelector(\".profile__edit-button\");\r\nconst editPopup = document.querySelector(\".popup_type_edit\");\r\neditOpener.addEventListener(\"click\", () => openEditPopup(editPopup));\r\n\r\nfunction openEditPopup(editPopup) {\r\n  addValuesInEditPopup();\r\n  clearValidation(editPopup, validationConfig);\r\n  openModal(editPopup);\r\n}\r\n\r\nconst popupInputName = document.querySelector(\".popup__input_type_name\");\r\nconst popupInputDescription = document.querySelector(\r\n  \".popup__input_type_description\"\r\n);\r\n\r\nfunction addValuesInEditPopup() {\r\n  popupInputName.value = profileTitle.textContent;\r\n  popupInputDescription.value = profileDescription.textContent;\r\n}\r\n\r\nconst newCardOpener = document.querySelector(\".profile__add-button\");\r\nconst newCardPopup = document.querySelector(\".popup_type_new-card\");\r\nnewCardOpener.addEventListener(\"click\", () => openNewCardPopup(newCardPopup));\r\n\r\nconst popupImage = document.querySelector(\".popup__image\");\r\nconst popupCaption = document.querySelector(\".popup__caption\");\r\nconst imagePopup = document.querySelector(\".popup_type_image\");\r\n\r\nfunction openNewCardPopup(newCardPopup) {\r\n  disableButton(newCardPopup);\r\n  openModal(newCardPopup);\r\n}\r\n\r\nfunction openImagePopup(link, name) {\r\n  openModal(imagePopup);\r\n  popupImage.src = link;\r\n  popupImage.alt = name;\r\n  popupCaption.textContent = name;\r\n}\r\n\r\nconst formEditProfile = document.forms.editProfile;\r\nconst nameInput = formEditProfile.elements.name;\r\nconst jobInput = formEditProfile.elements.description;\r\n\r\nconst newPlaceForm = document.forms.newPlace;\r\nconst placeName = newPlaceForm.elements.placeName;\r\nconst linkInput = newPlaceForm.elements.link;\r\n\r\nconst avatarForm = document.forms.avatar;\r\nconst avatarLink = avatarForm.elements.avatar;\r\n\r\n// Обработчик «отправки» формы\r\nfunction submitProfileImageForm(event) {\r\n  event.preventDefault();\r\n  toggleButtonTextContent(event.target);\r\n  const avatar = avatarLink.value;\r\n\r\n  patchAvatar(avatar)\r\n    .then((result) => {\r\n      profileImage.src = result.avatar;\r\n      closeModal(avatarPopup);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => {\r\n      toggleButtonTextContent(event.target);\r\n    });\r\n}\r\n\r\navatarPopup.addEventListener(\"submit\", submitProfileImageForm);\r\n\r\nfunction submitEditProfileForm(event) {\r\n  event.preventDefault();\r\n  toggleButtonTextContent(event.target);\r\n\r\n  const name = nameInput.value;\r\n  const about = jobInput.value;\r\n\r\n  patchEditProfile(name, about)\r\n    .then((res) => {\r\n      profileTitle.textContent = res.name;\r\n      profileDescription.textContent = res.about;\r\n      closeModal(editPopup);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => {\r\n      toggleButtonTextContent(event.target);\r\n    });\r\n}\r\n\r\neditPopup.addEventListener(\"submit\", submitEditProfileForm);\r\n\r\nfunction addNewCard(event) {\r\n  event.preventDefault();\r\n  toggleButtonTextContent(event.target);\r\n\r\n  const name = placeName.value;\r\n  const link = linkInput.value;\r\n\r\n  postNewCard(name, link)\r\n    .then((res) => {\r\n      placeList.prepend(\r\n        createCard(\r\n          { name, link, likes: res.likes, owner: res.owner, _id: res._id },\r\n          removeCard,\r\n          toggleLikeCard,\r\n          openImagePopup,\r\n          userId\r\n        )\r\n      );\r\n      closeModal(newCardPopup);\r\n      clearValidation(event.target, validationConfig);\r\n      disableButton(event.target);\r\n      event.target.reset();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => {\r\n      toggleButtonTextContent(event.target);\r\n    });\r\n}\r\n\r\nnewCardPopup.addEventListener(\"submit\", addNewCard);\r\n\r\nconst allPopups = document.querySelectorAll(\".popup\");\r\nallPopups.forEach((elem) => {\r\n  elem.classList.add(\"popup_is-animated\");\r\n});\r\n\r\nconst validationConfig = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  errorClass: \"popup__error_visible\",\r\n};\r\n\r\nenableValidation(validationConfig);\r\n"],"names":["checkResponse","res","ok","json","Promise","reject","concat","status","config","baseUrl","headers","authorization","request","endpoint","options","fetch","then","promise1","resolve","result","promise2","cardTemplate","document","querySelector","content","createCard","card","removeCard","toggleLikeCard","openImagePopup","userId","newCard","cloneNode","cardImage","src","link","alt","name","textContent","likes","length","getCardTemplate","buttonDelete","addEventListener","owner","_id","classList","add","buttonLike","forEach","element","toggle","cardElement","cardId","method","remove","catch","err","console","log","contains","deleteLike","finally","putLike","openModal","popup","closeModalEsc","closeOnBackDropClick","closeModal","removeEventListener","_ref","currentTarget","target","event","key","hideInputError","formElement","inputElement","validationConfig","errorElement","id","inputErrorClass","errorClass","clearValidation","Array","from","querySelectorAll","inputSelector","elm","disableButton","newCardPopup","popupButton","disabled","toggleButtonTextContent","includes","profileTitle","profileDescription","profileImage","all","_ref2","response1","response2","about","avatar","elem","placeList","append","appendCard","initCards","evt","avatarOpener","avatarPopup","popupInputUrl","value","editProfileImage","editOpener","editPopup","popupInputName","popupInputDescription","openEditPopup","newCardOpener","openNewCardPopup","popupImage","popupCaption","imagePopup","formEditProfile","forms","editProfile","nameInput","elements","jobInput","description","newPlaceForm","newPlace","placeName","linkInput","avatarLink","preventDefault","body","JSON","stringify","postNewCard","prepend","reset","formSelector","submitButtonSelector","inactiveButtonClass","inputList","validity","patternMismatch","setCustomValidity","dataset","errorMessage","valid","showInputError","validationMessage","isValid","some","hasInvalidInput","toggleButtonState","setEventListeners","enableValidation"],"sourceRoot":""}