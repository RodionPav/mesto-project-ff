{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/utils/checkResponse.js","webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/scripts/index.js"],"sourcesContent":["function checkResponse(res) {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка: ${res.status}`);\r\n}\r\n\r\nexport { checkResponse };\r\n","import { checkResponse } from \"../utils/checkResponse\";\r\n\r\nconst config = {\r\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-24\",\r\n  headers: {\r\n    authorization: \"d8924f35-962a-45f8-9e42-e25d9d1dfa42\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\nfunction request(endpoint, options) {\r\n  return fetch(`${config.baseUrl}${endpoint}`, options).then(checkResponse);\r\n}\r\n\r\nconst promise1 = new Promise((resolve, reject) => {\r\n  request(`/users/me`, {\r\n    headers: config.headers,\r\n  }).then((result) => {\r\n    resolve(result);\r\n  });\r\n});\r\n\r\nconst promise2 = new Promise((resolve, reject) => {\r\n  request(`/cards`, {\r\n    headers: config.headers,\r\n  }).then((result) => {\r\n    resolve(result);\r\n  });\r\n});\r\n\r\nexport const getInitialData = (editProfile, initCards, userId) => {\r\n  Promise.all([promise1, promise2]).then(([response1, response2]) => {\r\n    editProfile(response1);\r\n    initCards(response2);\r\n  });\r\n};\r\n\r\nexport const patchAvatar = (avatar) => {\r\n  return request(`/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar,\r\n    }),\r\n  });\r\n};\r\n\r\nexport const patchEditProfile = (name, about) => {\r\n  return request(`/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name,\r\n      about,\r\n    }),\r\n  });\r\n};\r\n\r\nexport const postNewCard = (name, link) => {\r\n  return request(`/cards`, {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name,\r\n      link,\r\n    }),\r\n  });\r\n};\r\n\r\nexport const deleteCard = (cardId) => {\r\n  return request(`/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  });\r\n};\r\n\r\nexport const putLike = (card) => {\r\n  return request(`/cards/likes/${card._id}`, {\r\n    method: \"PUT\",\r\n    headers: config.headers,\r\n  });\r\n};\r\n\r\nexport const deleteLike = (card) => {\r\n  return request(`/cards/likes/${card._id}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  });\r\n};\r\n","import { deleteCard, deleteLike, putLike } from \"./api\";\r\n\r\nconst cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\nfunction createCard(card, removeCard, toggleLikeCard, openImagePopup, userId) {\r\n  const newCard = cardTemplate.querySelector(\".places__item\").cloneNode(true);\r\n  getCardTemplate(card, newCard);\r\n\r\n  const buttonDelete = newCard.querySelector(\".card__delete-button\");\r\n  buttonDelete.addEventListener(\"click\", () => {\r\n    removeCard(card, newCard);\r\n  });\r\n  if (card.owner._id !== userId) {\r\n    buttonDelete.classList.add(\"card__delete-button-hidden\");\r\n  }\r\n\r\n  const buttonLike = newCard.querySelector(\".card__like-button\");\r\n  card.likes.forEach((element) => {\r\n    if (element._id == userId) {\r\n      buttonLike.classList.toggle(\"card__like-button_is-active\");\r\n    }\r\n  });\r\n  buttonLike.addEventListener(\"click\", () => {\r\n    toggleLikeCard(buttonLike, card, newCard);\r\n  });\r\n\r\n  const imageOpener = newCard.querySelector(\".card__image\");\r\n  imageOpener.addEventListener(\"click\", () =>\r\n    openImagePopup(card.link, card.name)\r\n  );\r\n  return newCard;\r\n}\r\n\r\nfunction getCardTemplate(card, newCard) {\r\n  const cardImage = newCard.querySelector(\".card__image\");\r\n  cardImage.src = card.link;\r\n  cardImage.alt = card.name;\r\n  newCard.querySelector(\".card__title\").textContent = card.name;\r\n  newCard.querySelector(\".card__like-counter\").textContent = card.likes.length;\r\n}\r\n\r\nfunction removeCard(card, cardElement) {\r\n  deleteCard(card._id)\r\n    .then(() => {\r\n      cardElement.remove();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n}\r\n\r\nfunction toggleLikeCard(cardElement, card, newCard) {\r\n  if (cardElement.classList.contains(\"card__like-button_is-active\")) {\r\n    deleteLike(card)\r\n      .then((result) => {\r\n        newCard.querySelector(\".card__like-counter\").textContent =\r\n          result.likes.length;\r\n        cardElement.classList.toggle(\"card__like-button_is-active\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  } else {\r\n    putLike(card)\r\n      .then((result) => {\r\n        newCard.querySelector(\".card__like-counter\").textContent =\r\n          result.likes.length;\r\n        cardElement.classList.toggle(\"card__like-button_is-active\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n}\r\n\r\nexport { createCard, removeCard, toggleLikeCard };\r\n","function openModal(popup) {\r\n  popup.classList.add(\"popup_is-opened\");\r\n  document.addEventListener(\"keydown\", closeModalEsc);\r\n  popup.addEventListener(\"click\", closeOnBackDropClick);\r\n}\r\n\r\nfunction closeModal(popup) {\r\n  popup.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", closeModalEsc);\r\n  popup.removeEventListener(\"click\", closeOnBackDropClick);\r\n}\r\n\r\nfunction closeOnBackDropClick({ currentTarget, target }) {\r\n  const popup = currentTarget;\r\n  const isClickedOnBackDrop = target === popup;\r\n  if (isClickedOnBackDrop) {\r\n    closeModal(popup);\r\n  }\r\n}\r\n\r\nfunction closeModalEsc() {\r\n  if (event.key === \"Escape\") {\r\n    const opendPopup = document.querySelector(\".popup_is-opened\");\r\n    closeModal(opendPopup);\r\n  }\r\n}\r\n\r\nexport { openModal, closeModal };\r\n","const hasInvalidInput = (inputList) => {\r\n  return inputList.some((inputElement) => {\r\n    return !inputElement.validity.valid;\r\n  });\r\n};\r\n\r\nconst toggleButtonState = (inputList, formElement, validationConfig) => {\r\n  const popupButton = formElement.querySelector(\r\n    validationConfig.submitButtonSelector\r\n  );\r\n  if (hasInvalidInput(inputList)) {\r\n    popupButton.disabled = true;\r\n    popupButton.classList.add(validationConfig.inactiveButtonClass);\r\n  } else {\r\n    popupButton.disabled = false;\r\n    popupButton.classList.remove(validationConfig.inactiveButtonClass);\r\n  }\r\n};\r\n\r\nconst showInputError = (\r\n  formElement,\r\n  inputElement,\r\n  errorMessage,\r\n  validationConfig\r\n) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.add(validationConfig.inputErrorClass);\r\n  errorElement.classList.add(validationConfig.errorClass);\r\n  errorElement.textContent = errorMessage;\r\n};\r\n\r\nconst hideInputError = (formElement, inputElement, validationConfig) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.remove(validationConfig.inputErrorClass);\r\n  errorElement.classList.remove(validationConfig.errorClass);\r\n  errorElement.textContent = \"\";\r\n};\r\n\r\nconst isValid = (formElement, inputElement, validationConfig) => {\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity(\"\");\r\n  }\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(\r\n      formElement,\r\n      inputElement,\r\n      inputElement.validationMessage,\r\n      validationConfig\r\n    );\r\n  } else {\r\n    hideInputError(formElement, inputElement, validationConfig);\r\n  }\r\n};\r\n\r\nconst setEventListeners = (formElement, validationConfig) => {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(validationConfig.inputSelector)\r\n  );\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener(\"input\", () => {\r\n      isValid(formElement, inputElement, validationConfig);\r\n      toggleButtonState(inputList, formElement, validationConfig);\r\n    });\r\n  });\r\n};\r\n\r\nconst enableValidation = (validationConfig) => {\r\n  const formList = Array.from(\r\n    document.querySelectorAll(validationConfig.formSelector)\r\n  );\r\n  formList.forEach((formElement) => {\r\n    setEventListeners(formElement, validationConfig);\r\n  });\r\n};\r\n\r\nconst clearValidation = (formElement, validationConfig) => {\r\n  const errorElements = Array.from(\r\n    formElement.querySelectorAll(validationConfig.inputSelector)\r\n  );\r\n  errorElements.forEach((elm) => {\r\n    hideInputError(formElement, elm, validationConfig);\r\n  });\r\n};\r\n\r\nconst disableButton = (newCardPopup) => {\r\n  const popupButton = newCardPopup.querySelector(\".popup__button\");\r\n  popupButton.disabled = true;\r\n  popupButton.classList.add(\"popup__button_disabled\");\r\n};\r\n\r\nexport { enableValidation, clearValidation, disableButton };\r\n","import \"../pages/index.css\";\r\nimport { createCard, removeCard, toggleLikeCard } from \"../components/card\";\r\nimport { openModal, closeModal } from \"../components/modal\";\r\nimport {\r\n  enableValidation,\r\n  clearValidation,\r\n  disableButton,\r\n} from \"../components/validation\";\r\nimport {\r\n  getInitialData,\r\n  patchAvatar,\r\n  patchEditProfile,\r\n  postNewCard,\r\n} from \"../components/api\";\r\n\r\nlet userId;\r\n\r\nfunction toggleButtonTextContent(popup) {\r\n  const popupButton = popup.querySelector(\".popup__button\");\r\n  if (popupButton.textContent.includes(\"Сохранить\")) {\r\n    popupButton.textContent = \"Сохранение...\";\r\n  } else {\r\n    popupButton.textContent = \"Сохранить\";\r\n  }\r\n}\r\n\r\nconst profileTitle = document.querySelector(\".profile__title\");\r\nconst profileDescription = document.querySelector(\".profile__description\");\r\nconst profileImage = document.querySelector(\".profile__image-img\");\r\n\r\nconst editProfile = (result) => {\r\n  userId = result._id;\r\n  profileTitle.textContent = result.name;\r\n  profileDescription.textContent = result.about;\r\n  profileImage.src = result.avatar;\r\n};\r\n\r\nconst initCards = (result) => {\r\n  result.forEach((elem) => appendCard(elem));\r\n};\r\n\r\ngetInitialData(editProfile, initCards, userId);\r\n\r\nconst placeList = document.querySelector(\".places__list\");\r\n\r\nfunction appendCard(elem) {\r\n  const cardElement = createCard(\r\n    elem,\r\n    removeCard,\r\n    toggleLikeCard,\r\n    openImagePopup,\r\n    userId\r\n  );\r\n  placeList.append(cardElement);\r\n}\r\n\r\nconst popups = document.querySelectorAll(\".popup\");\r\n\r\npopups.forEach((popup) => {\r\n  popup.addEventListener(\"click\", function (evt) {\r\n    if (evt.target.classList.contains(\"popup__close\")) {\r\n      closeModal(popup);\r\n    }\r\n  });\r\n});\r\n\r\nconst avatarOpener = document.querySelector(\".profile__image-button\");\r\nconst avatarPopup = document.querySelector(\".popup_type_avatar\");\r\navatarOpener.addEventListener(\"click\", () => editProfileImage(avatarPopup));\r\nconst popupInputUrl = document.querySelector(\".popup__input_type_avatar_url\");\r\n\r\nfunction editProfileImage(avatarPopup) {\r\n  openModal(avatarPopup);\r\n  addValuesInAvatarPopup();\r\n}\r\n\r\nfunction addValuesInAvatarPopup() {\r\n  popupInputUrl.value = profileImage.src;\r\n}\r\n\r\nconst editOpener = document.querySelector(\".profile__edit-button\");\r\nconst editPopup = document.querySelector(\".popup_type_edit\");\r\neditOpener.addEventListener(\"click\", () => openEditPopup(editPopup));\r\n\r\nfunction openEditPopup(editPopup) {\r\n  addValuesInEditPopup();\r\n  clearValidation(editPopup, validationConfig);\r\n  openModal(editPopup);\r\n}\r\n\r\nconst popupInputName = document.querySelector(\".popup__input_type_name\");\r\nconst popupInputDescription = document.querySelector(\r\n  \".popup__input_type_description\"\r\n);\r\n\r\nfunction addValuesInEditPopup() {\r\n  popupInputName.value = profileTitle.textContent;\r\n  popupInputDescription.value = profileDescription.textContent;\r\n}\r\n\r\nconst newCardOpener = document.querySelector(\".profile__add-button\");\r\nconst newCardPopup = document.querySelector(\".popup_type_new-card\");\r\nnewCardOpener.addEventListener(\"click\", () => openNewCardPopup(newCardPopup));\r\n\r\nconst popupImage = document.querySelector(\".popup__image\");\r\nconst popupCaption = document.querySelector(\".popup__caption\");\r\nconst imagePopup = document.querySelector(\".popup_type_image\");\r\n\r\nfunction openNewCardPopup(newCardPopup) {\r\n  disableButton(newCardPopup);\r\n  openModal(newCardPopup);\r\n}\r\n\r\nfunction openImagePopup(link, name) {\r\n  openModal(imagePopup);\r\n  popupImage.src = link;\r\n  popupImage.alt = name;\r\n  popupCaption.textContent = name;\r\n}\r\n\r\nconst formEditProfile = document.forms.editProfile;\r\nconst nameInput = formEditProfile.elements.name;\r\nconst jobInput = formEditProfile.elements.description;\r\n\r\nconst newPlaceForm = document.forms.newPlace;\r\nconst placeName = newPlaceForm.elements.placeName;\r\nconst linkInput = newPlaceForm.elements.link;\r\n\r\nconst avatarForm = document.forms.avatar;\r\nconst avatarLink = avatarForm.elements.avatar;\r\n\r\n// Обработчик «отправки» формы\r\nfunction submitProfileImageForm(event) {\r\n  event.preventDefault();\r\n  toggleButtonTextContent(event.target);\r\n  const avatar = avatarLink.value;\r\n\r\n  patchAvatar(avatar)\r\n    .then((result) => {\r\n      profileImage.src = result.avatar;\r\n      closeModal(avatarPopup);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => {\r\n      toggleButtonTextContent(event.target);\r\n    });\r\n}\r\n\r\navatarPopup.addEventListener(\"submit\", submitProfileImageForm);\r\n\r\nfunction submitEditProfileForm(event) {\r\n  event.preventDefault();\r\n  toggleButtonTextContent(event.target);\r\n\r\n  const name = nameInput.value;\r\n  const about = jobInput.value;\r\n\r\n  patchEditProfile(name, about)\r\n    .then((res) => {\r\n      profileTitle.textContent = res.name;\r\n      profileDescription.textContent = res.about;\r\n      closeModal(editPopup);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => {\r\n      toggleButtonTextContent(event.target);\r\n    });\r\n}\r\n\r\neditPopup.addEventListener(\"submit\", submitEditProfileForm);\r\n\r\nfunction addNewCard(event) {\r\n  event.preventDefault();\r\n  toggleButtonTextContent(event.target);\r\n\r\n  const name = placeName.value;\r\n  const link = linkInput.value;\r\n\r\n  postNewCard(name, link)\r\n    .then((res) => {\r\n      placeList.prepend(\r\n        createCard(\r\n          { name, link, likes: res.likes, owner: res.owner, _id: res._id },\r\n          removeCard,\r\n          toggleLikeCard,\r\n          openImagePopup,\r\n          userId\r\n        )\r\n      );\r\n      closeModal(newCardPopup);\r\n      clearValidation(event.target, validationConfig);\r\n      disableButton(event.target);\r\n      event.target.reset();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => {\r\n      toggleButtonTextContent(event.target);\r\n    });\r\n}\r\n\r\nnewCardPopup.addEventListener(\"submit\", addNewCard);\r\n\r\nconst allPopups = document.querySelectorAll(\".popup\");\r\nallPopups.forEach((elem) => {\r\n  elem.classList.add(\"popup_is-animated\");\r\n});\r\n\r\nconst validationConfig = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  errorClass: \"popup__error_visible\",\r\n};\r\n\r\nenableValidation(validationConfig);\r\n"],"names":["checkResponse","res","ok","json","Promise","reject","concat","status","config","baseUrl","headers","authorization","request","endpoint","options","fetch","then","promise1","resolve","result","promise2","cardTemplate","document","querySelector","content","createCard","card","removeCard","toggleLikeCard","openImagePopup","userId","newCard","cloneNode","cardImage","src","link","alt","name","textContent","likes","length","getCardTemplate","buttonDelete","addEventListener","owner","_id","classList","add","buttonLike","forEach","element","toggle","cardElement","cardId","method","remove","catch","err","console","log","contains","deleteLike","putLike","openModal","popup","closeModalEsc","closeOnBackDropClick","closeModal","removeEventListener","_ref","currentTarget","target","event","key","hideInputError","formElement","inputElement","validationConfig","errorElement","id","inputErrorClass","errorClass","clearValidation","Array","from","querySelectorAll","inputSelector","elm","disableButton","newCardPopup","popupButton","disabled","toggleButtonTextContent","includes","profileTitle","profileDescription","profileImage","all","_ref2","response1","response2","about","avatar","elem","placeList","append","appendCard","initCards","evt","avatarOpener","avatarPopup","popupInputUrl","value","editProfileImage","editOpener","editPopup","popupInputName","popupInputDescription","openEditPopup","newCardOpener","openNewCardPopup","popupImage","popupCaption","imagePopup","formEditProfile","forms","editProfile","nameInput","elements","jobInput","description","newPlaceForm","newPlace","placeName","linkInput","avatarLink","preventDefault","body","JSON","stringify","finally","postNewCard","prepend","reset","formSelector","submitButtonSelector","inactiveButtonClass","inputList","validity","patternMismatch","setCustomValidity","dataset","errorMessage","valid","showInputError","validationMessage","isValid","some","hasInvalidInput","toggleButtonState","setEventListeners","enableValidation"],"sourceRoot":""}